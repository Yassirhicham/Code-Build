<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT based Home Automation - Proyecto Arduino</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #ffffff;
            text-align: center;
        }
        .container {
            width: 90%;
            max-width: 1000px;
            margin: auto;
            background: #1e1e1e;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0px 0px 15px rgba(0, 255, 204, 0.3);
        }
        .contenedor {
            text-align: center; /* Centra las im√°genes */
        }
        .contenedor img {
            width: 200px; /* Ajusta el tama√±o seg√∫n necesites */
            margin: 10px;
            display: inline-block;
        }
        header {
            background: linear-gradient(135deg, #00ffcc, #007777);
            color: #ffffff;
            padding: 30px;
            border-radius: 12px 12px 0 0;
        }
        header h1 {
            margin: 0;
            font-size: 28px;
            letter-spacing: 1.5px;
        }
        .content {
            text-align: left;
        }
        .image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0px 0px 10px rgba(0, 255, 204, 0.5);
            transition: transform 0.3s ease;
        }
        .image:hover {
            transform: scale(1.05);
        }
        pre {
            background: #000;
            color: #00ffcc;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            box-shadow: 0px 0px 15px rgba(0, 255, 204, 0.5);
        }
        footer {
            background: linear-gradient(135deg, #1e1e1e, #1e1e1e);
            color: #ffffff;
            padding: 20px;
            margin-top: 20px;
            border-radius: 0 0 12px 12px;
        }
        .highlight {
            color: #00ffcc;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>IoT based Home Automation - Proyecto Arduino</h1>
        </header>
        <div class="content">
            <h2>üîç Introducci√≥n</h2>
            <p>En este proyecto con la placa ESP32, mi compa√±era Iris y yo hemos mostrado c√≥mo realizar una Automatizaci√≥n Dom√≥tica IoT, implementando un c√≥digo en Arduino que estar√° vinculado a una aplicaci√≥n.

                Esta aplicaci√≥n, llamada Blynk, nos permitir√° controlar manualmente, tanto desde fuera de casa como desde dentro, los dispositivos conectados a Internet que se encuentren en el hogar.
                
                Por √∫ltimo, con la ayuda del Asistente de Google y una plataforma, este control tambi√©n se podr√° realizar mediante comandos de voz.</p>
            
            <h2>‚öôÔ∏è Implementaci√≥n</h2>
            <p>En este apartado se explicar√° el funcionamiento del proyecto, as√≠ como el c√≥digo Arduino implementado y tambi√©n las aplicaciones utilizadas.</p>
            <h3>Objetivos del Proyecto</h3>
            <p>El principal objetivo es optimizar el consumo o funcionamiento de los dispositivos dom√©sticos.

                Es un proyecto que podr√≠a aplicarse a diversos aparatos que encontramos en nuestro hogar, pero para simplificarlo, lo llevar√© a cabo con un elemento b√°sico.
                
                Para mostrar de forma sencilla y breve los conceptos fundamentales, he adaptado este proyecto a una luz, es decir, automatizar√© el consumo y el funcionamiento de una luz utilizando la placa ESP32 y una aplicaci√≥n que me permitir√° encenderla o apagarla de forma remota, en caso de que, por ejemplo, me la haya dejado encendida.</p>
             <h3>Material utilizado</h3>   
             <div class="contenedor">
                <img src="Fotos/ESP32.png" alt="Imagen de Esp 32" class="image">
                <img src="Fotos/Rele.png" alt="Imagen del Rele" class="image">
                <img src="Fotos/Luz.png" alt="Imagen de la luz" class="image">
                <img src="Fotos/Adaptador.png" alt="Imagen del adaptador" class="image">
            </div>
            <h3>Montaje</h3>
            <div class="contenedor">
                <img src="Fotos/montaje.png" alt="Imagen del montaje1" class="image">
                <img src="Fotos/montaje1.png" alt="Imagen del montaje2" class="image">
                <img src="Fotos/montaje2.png" alt="Imagen del montaje3" class="image">
            </div>
           <h3>Conexiones</h3>
           <p>El rel√© se conecta a la placa ESP32 mediante tres pines:</p>
            <ul>
                <li>El primer pin ‚ÄòS‚Äô se conecta a la salida digital ‚ÄòD2‚Äô.</li>
                <li>El pin ‚Äò+‚Äô se conecta a ‚ÄòVCC 5V‚Äô.</li>
                <li>Por √∫ltimo, el pin ‚Äò-‚Äô se conecta a ‚ÄòGND‚Äô.</li>
            </ul>
            <p>S: Se√±al </p>
            <p>+: positivo</p>
            <p>-: negativo</p>

            <h3>Aplicaci√≥n Blynk</h3>
            <p>Esta aplicaci√≥n puede gestionar dispositivos IoT, y en mi caso, gestiona el estado de la luz.

                Esta gesti√≥n es muy sencilla, ya que dentro de la aplicaci√≥n podemos tener registrados varios dispositivos.
                
                Para poder vincular la luz con Blynk, necesitamos que la propia aplicaci√≥n nos proporcione el ‚ÄòToken‚Äô y el ‚ÄòID‚Äô. Esto se nos proporciona una vez nos hemos registrado.
            </p>
            <img src="Fotos/Web.png" alt="Imagen de la web" class="image"> 
            
            <h3>Par√°metros proporcionados</h3>
            <p>Para enlazar la luz, se define el ID y el Token:</p>
            <pre>
                #define BLYNK_TEMPLATE_ID "TMPL5ionyk6pQ"
                #define BLYNK_TEMPLATE_NAME "llum"
                #define BLYNK_AUTH_TOKEN "kqqOw3dEBnwSb3FEHjBbHsKYawXy9RMv"
            </pre>
            <p>Funci√≥n BLYNK_WRITE</p>
            <pre>
                BLYNK_WRITE(V2){
                    digitalWrite(V2, param.asInt());
                }
            </pre>
            <p>Esta funci√≥n la proporciona la propia biblioteca de Blynk y se invoca cada vez que se recibe un dato desde el dispositivo vinculado con la aplicaci√≥n. En este caso, la luz se identifica como V2.

            </p>
            <p>Conexi√≥n con Blynk</p>
            <pre>
                Blynk.begin(auth, ssid, pass, "blynk.cloud", 80);
            </pre>
            <p>En esta l√≠nea de c√≥digo se inicia la comunicaci√≥n con el servidor. Donde ‚Äòblynk.cloud‚Äô es la direcci√≥n del servidor en la nube de Blynk, y ‚Äò80‚Äô es el puerto para el protocolo HTTP.</p>
            <img src="Fotos/Web1.png" alt="Imagen de la web" class="image"> 
            <p>Plataforma Twilio i ThingESP:</p>   
            <pre>ThingESP32 thing("iriscruz", "ControlEsp32", "ProjectIris");</pre> 
            <p>Por √∫ltimo, con esta l√≠nea de comandos podemos conectarnos a la plataforma en la nube ThingESP, donde, a trav√©s de un enlace que se generar√°, podremos utilizar un ‚Äòbot‚Äô (llamado Twilio) a trav√©s de WhatsApp, es decir, un contacto que podremos controlar con nuestra voz.</p>


            <h2>üìä Resultados</h2>
            <p>En este apartado del informe veremos los resultados de c√≥mo se puede controlar la luz tanto a trav√©s de la aplicaci√≥n Blynk como con el Asistente de Google.</p>
            <h3>- Control de la luz mediante Blynk</h3>
            <p>Quan la llum est√† encesa veiem a la placa ESP32 una led de color blau, aquesta
                ens confirma que estem emeten llum.
            </p>
            <div class="contenedor">
                <img src="Fotos/Resultados.png" alt="Imagen del resultado" class="image">
                <img src="Fotos/resultados1.png" alt="Imagen del resultado2" class="image">
            </div>

            <p> Control de la luz mediante el Assistente de Google</p>
            <div class="contenedor">
                <img src="Fotos/Resultados2.png" alt="Imagen del resultado" class="image">
                <img src="Fotos/resultados3.png" alt="Imagen del resultado2" class="image">
                <img src="Fotos/resultados4.png" alt="Imagen del resultado2" class="image">
            </div>

            
            <h2>üíª C√≥digo Arduino</h2>
<pre>            
// Incluye la librer√≠a del Servo
#define BLYNK_PRINT Serial
#define BLYNK_TEMPLATE_ID "TMPL5ionyk6pQ"
#define BLYNK_TEMPLATE_NAME "llum"
#define BLYNK_AUTH_TOKEN "kqqOw3dEBnwSb3FEHjBbHsKYawXy9RMv"

#include <WiFi.h>
#include <WiFiClient.h>
#include <BlynkSimpleEsp32.h>
#include <ThingESP.h>

// Configuraci√≥n de ThingESP
ThingESP32 thing("yassirhicham", "ControlEsp32", "ProjectYassir");

// Definici√≥n de pines y variables
int LIGHT = 2;
unsigned long previousMillis = 0;
const long INTERVAL = 6000;

// Credenciales de conexi√≥n
char auth[] = BLYNK_AUTH_TOKEN;
char ssid[] = "wifi_iris";
char pass[] = "holacomoestas";

// Funci√≥n para manejar el pin virtual V2 con Blynk
BLYNK_WRITE(V2) {
    digitalWrite(V2, param.asInt());
}

// Configuraci√≥n inicial
void setup() {
    pinMode(LIGHT, OUTPUT);
    pinMode(V2, OUTPUT);

    // Conectar a Blynk
    Blynk.begin(auth, ssid, pass, "blynk.cloud", 80);

    // Conectar a ThingESP
    thing.SetWiFi(ssid, pass);
    thing.initDevice();
}

// Funci√≥n para manejar respuestas a comandos en ThingESP
String HandleResponse(String query) {
    if (query == "light on") {
        digitalWrite(LIGHT, 1);
        return "Done: Light Turned ON";
    } 
    else if (query == "light off") {
        digitalWrite(LIGHT, 0);
        return "Done: Light Turned OFF";
    } 
    else if (query == "light status") {
        return digitalRead(LIGHT) ? "LIGHT is OFF" : "LIGHT is ON";
    } 
    else {
        return "Your query was invalid..";
    }
}

// Bucle principal
void loop() {
    Blynk.run();
    thing.Handle();
}
</pre>
        </div>
        <button onclick="window.location.href='proyectos.html'" style="margin-top: 20px; padding: 10px 20px; font-size: 16px; background-color: #00ffcc; color: #121212; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s;">Volver a Proyectos</button>
        <footer>
            <p>&copy; 2024 Yassir Hicham - Proyecto Radar</p>
        </footer>
    </div>
</body>
</html>
